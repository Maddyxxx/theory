

# Мапа
==============================
## Часто
-------------
### Что такое мапа?
Структура ключ-значение, под капотом которой хеш таблицы и бакеты.

## Средне
-------------
### Что произойдет при конкуррентной записи в мапу? 
Мапа не потокобезопасна и будет состояние гонки (поведение программы не детерминировано)

### Как устроена мапа под капотом?
Хеш таблица + бакеты (в рамках бакета 8 позиций на которые мы можем записывать значение)

### Какие ключи могут быть у мапы?
Любые сравнимые типы данных

### Какая сложность работы с мапой?
В лучшем случае - О(1), в худшем - О(n) (завист от количества коллизий/хеш функции)

### Можно ли взять адрес элемента мапы и почему?
Нет нельзя, поскольку это нарушит целостность данных - мапа не потокобезопасна (возможны ошибки - значение переместиться в другой у## Часток памяти или память вообще будет высвобождена и будет out of bounds)

### Как работает эвакуация данных?
Эвакуация данных - механизм распределения данных при увелечении мапы (или при достижении заполненности бакета 80%). Создаётся новый бакет в который начинается распределение данных (процесс не мгновенный и на время переезда старый бакет соединяется с новым через указатель).

## Редко
-------------
### Как разрешаются коллизии в мапе?
В рамках коллизии выбирается один и тот же бакет и если происходит коллизия - создаётся новый бакет который прилинковывается к первоначальному (аналог связного списка).

### Как сделать конкурентную запись в мапу?
Обернуть мапу в структуру в которую доложить мьютекс (классический или RWMutex)

### Как достигается константная сложность работы с мапой?
За счёт хеш-таблицы

### Для чего используется мапа?
Для хранения данных по ключу

### Мапа потокобезопасная?
Нет (но есть sync.Map)

### Пробовали из разных потоков писать в мапу?
Да, пробовал, происходит состояние гонки 

### Стало слишком много коллизий в мапе, как решить проблему?
Переопределить хеш функцию у своих сравнимых структур ключа

### Какая сложность работы с мапой в худшем случае?
О(n)

### Что произойдет при конкуррентном чтении из мапы?
Блокировки?

### Чем мапа отличается от sync.Map?
Мьютексом


# Массивы/Слайсы
==============================
## Часто
-------------
### Что такое слайс?
Структура хранящая внутри указатель на массив определённой длинны и число-каписити

### Чем массив отличается от слайса?
Тем что слайс динамически может менять свой размер (увеличивать или уменьшать)

## Средне
-------------
### Как работает append?
В зависимости от текущих len/cap либо дописывает значение в текущий массив (возможна перезапись), либо создаёт новый массив х2 размера + подменяет указатель в слайсе + дописывает значение в новый массив

## Редко
-------------
### Как правильно/неправильно работать со слайсом?
Всегда передавать указатель на слайс - правильно (потому что может произойти пересоздание внутреннего массива и потеря указателя)

### Для чего можно использовать массивы в Golang?
Для хранения значений при условии что мы ГАРАНТИРОВАНО знаем что количество не будет меняться

### До какого размера можно увеличивать слайс?
В зависимости от версии golang значение меняется. В настоящий момент я не помню и босюь обмануть - лучше сходить в документацию

### Допустима ли конкуррентная работа со слайсом?
Нет, слайс не потокобезопасен

### Для чего используются слайсы?
Для храния динамически меняющих свой размер массивовов данных

### Берем от слайса слайс, куда будет указывать его указатель?
На сегмент исходного массива

### В чем разница между слайсом указателей и слайсом значений с точки зрения вызова функции?
Придётся проводить дополнительные разименования, изменится сигнатура функции (**[]int *[]int)

### Где в памяти размещается массив, а где слайс?
Зависит от. При компиляции программы будет происходить escape анализ. Скорее всего указатель на внутренний массив слайса будет на стеке, а сам массив - в heap. Если массив будет превышать некий размер то он тоже поедет на кучу.

### Какие методы оптимизации работы со слайсами ты бы применил в работе?
Можно копировать их между горутинами таким образом уменьшив количесто аллокация.

### Какие есть ограничения при работе со слайсом?
Нет удаления полноценного - по факту мы пересоздаём слайс меньшей длинны. А высвобождение данных лежит на исполнения.

### Какие есть средства для добавления элементов в слайс?
append

### Какая есть функции для создания слайса с длиной отличной от нуля?
make

### С какой скоростью идет поиск в массиве и почему?
O(n) - идёт полный перебор

### Чем хорош массив по сравнению со слайсом?
Конечная длинна и передача по значению

### Что такое массив?
Последовательный сегмент в памяти в каждой из ячеек которого (размер ячейки зависит от типа данных) хранятся значения. По факту массив - это указатель на начало последовательного сегмента, а обращение к каждой из его ячеек - это приплюсовывание к начальному указателю номера ячейки*размер.

# Каналы
==============================
## Часто
-------------
### Что такое каналы?
Структура для передачи данных между горутинами

## Средне
-------------
### Как устроен канал и как он работает под капотом?
Есть сегмент памяти для переваемых значений (1 или множества). Есть список читающих и пишущих горутин. Есть размер канала.

### Какие есть типы каналов в Golang?
Буферизованые и небуферизованые. Однонаправленые и двунаправленые

### Что если писать/читать в закрытый канал?
При попытке записи в закрытый канал будет паника. При записи в заполненные канал будет блокировка. При чтении из закрытого канала будут считываться записанные значения, а когда они закончатся - дефолтные значения в зависимости от объявленного типа канала (в случае int-0, string-""). Также можно считать факт наличия значений в канале. 

## Редко
-------------
### Что будет при записи в закрытый канал?
panic

### Чем отличается запись/чтение в буферизованном и небуферизованном канале?
При записи в небуферизованый канал если уже значение - deadlock
При записи в буферизованый канал если закончилось место - deadlock

При чтении из небуферизованого канала - будет происходить копирование значения между стеками горутин.
При чтении из буферизованого канала - будет происходить чтение из кучи, где размещён обменный массив канала.

### Что произойдет с читателями/писателями если закрыть канал?
Читатели смогут понять что канал закрыт через функции range/select. Писатели получат дедлоки если нет механизма их уведомления. ОЧЕНЬ ВАЖНО закрывать канал там где пишешь.

### Что если закрыть закрытый канал?
panic

### Что используется для неблокирующего чтения из канала?
select/range

### Какие операции есть с каналами?
запись, чтение, закрытие (close), создание (make)

### Какие параметры могут иметь каналы?
Тип и размер внутреннего массива (буф/небуф)

### Для чего используется select при работе с каналами?
Для неблокирующего чтения

### Как проверить, что канал закрыт?
Читать его через функцию range/select или считывать два значения.

### Как сделать канал буферизованным?
make(chan int, 3)

### Есть две горутины, одна пишет в небуферизованный, а другая в буферизованный канал, оба не читаются. Что произойдет?
Та что пишет в НЕбуферизованый будет блокироваться пока из канала не будет вычитано значение.


# Примитивы синхронизации
==============================
## Часто
-------------
### Какие примитивы синхронизации есть в Golang?
Atomic, Mutex, RWMutex, WaitGroup, lock, sync.Map, Pool, Semaphore

## Средне
-------------
### Чем мьютекс отличается от семафора?
Мьютекс позволяет организовать доступ к коду одновременно только одной горутине на запись, семафор - нескольким.

## Редко
-------------
### Чем мьютексы отличаются от атомиков?

### Что из пакета sync используешь на практике?
Atomic, Mutex, RWMutex, lock, sync.Map

### Что можно использовать для ожидания выполнения N горутин?
WaitGroup, Atomic

### Какие примитивы синхронизации использовал в работе и для чего?
atomic - инкрементирование счётчкиов (например метрики)
mutex - контроль доступа к коду
RWMutex - контроль доступа к данным
WaitGroup - Ожидание выполние параллельных задач (например обращение к 3 репозиториям)

### Как устроена WaitGroup под капотом и как ее можно реализовать самому?
Под капотом там счётчик который уменьшается/увеличивается через Add/Done

### Сколько нужно ядер, чтобы начать использовать sync.Map?
1

### Расскажи про sync.Map
Под капотом это мапа к которой прикрутили RWMutex

### Расскажи про пакет sync
В нём хранятся потокобезопасные структуры данных и примитивы сихнронизации потоков

### Когда нужно использовать Mutex, а когда RWMutex?
Когда мы можем разделить наши операции на читающие/записывающие

### Есть общий ресурс. Хотим, чтобы к нему одновременно обращались только N горутин. Как это сделать?
Через атомик/семафор

### Запустим 1000 горутин с инкрементом инта. Получим в конце тысячу? Что делать, чтобы получить тысячу?
Не факт, нужно использовать atomic/rwmutex

### Есть глобальная мапа, глобальный мьютекс. Две функции. Одна блочит мьютекс, а вторая нет. Что произойдет?
deadlock/race condition

### В чем разница между Mutex и RWMutex?
В разделении операций на читающие/записывающие. На читающие не будет проихсодить блокировки при RWMutex


# Горутины
==============================
## Часто
-------------
### Что такое горутина?
Это абстракция над потоками и процессорами в рамках которой мы исполняем наш код.

### Чем горутина отличается от треда?
Тред занимает больше памяти, горутина более лековесна. Тред управляется ядром системы, горутина - планировщиком GoLang


## Средне
-------------
### В чем преимущества горутин над тредами?
Тред занимает больше памяти, горутина более лековесна. Тред управляется ядром системы, горутина - планировщиком GoLang

### Что есть в Golang для многопоточности?
GMP модель, планировщик, каналы, пакет sync

## Редко
-------------
### Зачем понадобилось добавлять горутины в Golang?
Для поддержания большого кол-ва соеденений на сервере и более легковесного переключения контекста

### Как можно остановить горутину?
Она остановиться через 10мс после начала выполнения. Также можно передать в горутину объект контекста и задать TimeOut либо вызвать на этом объекте Cancel (ещё можно панику кинуть)

### Расскажите про конкуррентность и параллельность в Golang
GMP модель

### Когда возникает утечка горутины?
Когда мы не закрываем внешнее взаимодействие (например файловый дескриптор)

### Какие есть способы связи между горутинами, какие плюсы и минусы?
Каналы, внешние системы (шины данных например или тот же loopback порт)


# Интерфейсы
==============================
## Часто
-------------
### Что такое интерфейс?
Структура хранящая под капотом таблицу заявленных методов и указатель на объект реализующий их. 

## Средне
-------------
### Как устроен интерфейс?
Структура хранящая под капотом таблицу заявленных методов и указатель на объект реализующий их. 

### Для чего используется интерфейс?
Для уменьшения связанности кода

## Редко
-------------
### Как ты используешь интерфейс в работе?
В месте где объявляется обьект реализующий функционал объявляю интерфейс, в него добавляю все методы которые могут потребить извне. В месте где требуется такой объект опять объявляю интерфейс с нужными мне методами и работаю не с объектом а с интерфейсом. 

### Как в строготипизированным языке сделать функцию, которая работает с разными типами?
any - генерики или интерфейсы
    
### Зачем нужен пустой интерфейс?
для полиморфизма  (изменения работы программы в зависимости от разных входящих параметров)

### Есть интерфейс, а есть указатель на структуру, который nil. Кладем указатель в интерфейс. Что если сравнить интерфейс с nil?
Не будет равно. Из-за таблицы методов

### Чем `any` отличается от пустого интерфейса?


### Чем пустой интерфейс отличается от пустой структуры?



# Общее
==============================

## Средне
-------------
### Какие преимущества есть у Golang?
Легковесные треды, строгая типизация, простота синтаксиса и простота работы с многопоточкой

## Редко
-------------
### Какие основные компоненты библиотеки runtime знаешь?
Планировщик, сборщик мусора, переменные среды (GOMAXPROC)

### Какие недостатки есть у Golang?
Сборщик мусора непресдказуем, сложная типизация - нет кастов

### Какая последняя версия Golang?
1.23 (1.22 stable)

### Расскажи про пакет reflect и как его используешь?
    
### Как передаются параметры в функцию, по ссылке или по значению?
ВСЕГДА по значения - происходит копирование (либо указателей либо значений)

### Чем тебе понравился Golang?


# Планировщик
==============================

## Средне
-------------
### Как работает планировщик Golang?
Есть GMP модель.
Есть локальные и глобальные очереди. 
Есть кражи горутин и перераспределение нагрузки. 
Есть кооперативная модель и сейчас идёт переход на конкурентную 

## Редко
-------------
### Как работает вытесняющая многозадачность?


### За счет чего достигается параллельное выполнение в Golang? 
GMP

### В чем разница между вытесняющим и кооперативным планировщиком? 

### Может ли горутина начать работу на одном P, приостановиться и продолжить работу на другом P?


### Может ли одна очередь украсть горутины у другой?


### Расскажи про глобальную и локальную очереди


### Сколько потоков операционной системы мы можем создать?
GOMAXPROC/количество ядер или виртуальных потоков

### Какой тип планировщика в Golang?
кооперативный но сейчас идёт переход на конк

### Какую функцию выполняет планировщик?


### Что происходит с горутиной при ее создании?




# Контекст
==============================
## Часто
-------------
### Для чего используется контекст?
Для передачи данных и контроля выполнения горутин (Timeout/Cancel)

ctx.Cancel()

## Средне
-------------
### Что такое контекст?
Структура данных для передачи данных и контроля выполнения горутин (Timeout/Cancel)

## Редко
-------------
### Как работает WithCancel?


### Как применяешь контекст в работе?

### Какие есть виды контекстов?
ctx.Background - от наследуются все контексты. И параллельно есть ctx.ToDo()

# defer
==============================
## Часто
-------------
### Что такое defer?
Функция отложенного вызова

## Средне
-------------
### Для чего используется defer?
Для отложенного вызова кода по окончании выполнения функции

### Какой порядок выполнения нескольких defer?
Обратный входы (аналог стека или обоймы)

## Редко
-------------
### Код в defer выполняется до return или после?
Он вычисляется в моменте (с копией всех входящих параметров) и выполняется после.

# Память
==============================

## Редко
-------------
### Как узнать где выделяется переменная, в стеке или куче?
escape analysis + общие принципы (10мб стека горутины)

### Как можно обнаружить чересчур большое выделение памяти?
pprof

### Предположим есть рекурсивная функция. Вызывается много раз. Что может произойти?
переполнение и спираль смерти

### Расскажи про модель памяти в Golang, про стек и про кучу


### Какое максимальный размер значения для размещения в стеке?


### Что такое Escape Analysis?


### Что если при увеличении слайса полностью забьем память?
out of memory

### Что быстрее, размещение объектов в стеке или куче и почему?
в стеке

### Что такое утечка памяти?



# Типы данных
==============================

## Средне
-------------
### Какие типы данных есть в Golang?


## Редко
-------------
### Какой длины руна?
в завимости от кодировки

### Как реализовать Enum в Golang?
iota

### Если нужно в строке хранить эмодзи, то как это сделать? 
сменить кодировку

### Что если во время компиляции переполним тип? В int8 запишем  256?
произойдёт запись с начала 0..255 -> 0 1

### Что происходит при переполнении числа, например в uint8 выйдем за границу на 1?
запись с начала


# Гонка данных
==============================

## Средне
-------------
### Что такое race condition?


### Как обнаружить race condition?
инструменты golang - benchmark с флагом race

## Редко
-------------
### Флаг -race показывает гонку на этапе компиляции или выполнения?
компиляции


# Ошибки/Паника
==============================

## Редко
-------------
### Куда нужно помещать recover?
defer начало 

### Какая парадигма в Golang с точки зрения обработки исключений и ошибок?
### Какие есть функции для оборачивания и сравнения ошибок?
### Для чего используются ошибки, а для чего паника?
### Для чего используется паника?
### Что используется для обработки паники?
recover

### Что такое паника?


# Указатели
==============================

## Средне
-------------
### Что такое указатель?

## Редко
-------------
### Что такое ссылка на значение?
### Чем отличается ссылка от указателя?
### Чем чревато передавать структуру по ссылке?
### Для чего используются указатели?
### Для чего в практике используешь указатели?
### Какие есть средства для работы с указателями?
### Когда лучше использовать/не использовать указатели?


# Дженерики
==============================

## Средне
-------------
### С дженериками работали?

## Редко
-------------
### Чем кодогенерация отличается от дженериков?
### В какой версии появились дженерики?


# Конструкции
==============================

## Редко
-------------
### Гарантирует ли порядок выполнения конструкция select-case?
нет не гарантируется 

### Как выглядит конструкция утверждения типа switch?
### Нужно ли в switch-case проставлять break?
### Какие есть циклы в Golang?
### Чем отличается switch от select?


# ООП
==============================

## Средне
-------------
### Как устроено ООП в Golang?
### Как реализуется наследование в Golang?


# Сборщик мусора
==============================

## Редко
-------------
### Как приходилось работать со сборкой мусора?
### Как работает GC, его алгоритм и когда запускается?
### Вот выделилась память и она используется, зачем в таком случае нужен GC?
### Для чего используется GC?
### Какие есть рекомандации как упростить жизнь GC?
### Можно ли как-то отключить GC или ограничить запуски?
### Что такое GC?
### Что такое сборка мусора?


# Строки
==============================

## Средне
-------------
### Что такое string?

## Редко
-------------
### Приходит строка в utf8, там могут быть русские символы. Как узнать есть ли там русские буквы икак узнать длину в символах?
### Какие особенности есть у string?
### Как работать с utf8 строкой?


# Структуры
==============================

## Редко
-------------
### Имеет ли значение порядок полей в структуре?
### От чего зависит размер выравнивания в структуре?
### Что такое структура?


# Пакеты
==============================

## Редко
-------------
### Что такое пакет?
### Расскажи про папку internal
